<!doctype refentry PUBLIC "-//OASIS//DTD DocBook V4.1//EN" [

<!-- Process this file with docbook-to-man to generate an nroff manual
     page: `docbook-to-man manpage.sgml > manpage.1'.  You may view
     the manual page with: `docbook-to-man manpage.sgml | nroff -man |
     less'.  A typical entry in a Makefile or Makefile.am is:

manpage.1: manpage.sgml
	docbook-to-man $< > $@

    
	The docbook-to-man binary is found in the docbook-to-man package.
	Please remember that if you create the nroff version in one of the
	debian/rules file targets (such as build), you will need to include
	docbook-to-man in your Build-Depends control field.

  -->

  <!-- Fill in your name for FIRSTNAME and SURNAME. -->
  <!ENTITY dhfirstname "<firstname>Uwe</firstname>">
  <!ENTITY dhsurname   "<surname>Steinmann</surname>">
  <!-- Please adjust the date whenever revising the manpage. -->
  <!ENTITY dhdate      "<date>April 29, 2003</date>">
  <!-- SECTION should be 1-8, maybe w/ subsection other parameters are
       allowed: see man(7), man(1). -->
  <!ENTITY dhsection   "<manvolnum>1</manvolnum>">
  <!ENTITY dhemail     "<email>uwe@steinmann.cx</email>">
  <!ENTITY dhusername  "Uwe Steinmann">
  <!ENTITY dhucpackage "<refentrytitle>PXVIEW</refentrytitle>">
  <!ENTITY dhpackage   "pxview">

  <!ENTITY debian      "<productname>Debian</productname>">
  <!ENTITY gnu         "<acronym>GNU</acronym>">
  <!ENTITY gpl         "&gnu; <acronym>GPL</acronym>">
]>

<refentry>
  <refentryinfo>
    <address>
      &dhemail;
    </address>
    <author>
      &dhfirstname;
      &dhsurname;
    </author>
    <copyright>
      <year>2003</year>
      <holder>&dhusername;</holder>
    </copyright>
    &dhdate;
  </refentryinfo>
  <refmeta>
    &dhucpackage;

    &dhsection;
  </refmeta>
  <refnamediv>
    <refname>&dhpackage;</refname>

    <refpurpose>pxview reads Paradox files and shows information or dumps the records in different formats</refpurpose>
  </refnamediv>
  <refsynopsisdiv>
    <cmdsynopsis>
      <command>&dhpackage;</command>

      <arg><option>-h | --help <replaceable></replaceable></option></arg>

      <arg><option>-i | --info <replaceable></replaceable></option></arg>
      <arg><option>-c | --csv <replaceable></replaceable></option></arg>
      <arg><option>-s | --sql <replaceable></replaceable></option></arg>
      <arg><option>-x | --html <replaceable></replaceable></option></arg>
      <arg><option>-t | --schema <replaceable></replaceable></option></arg>
      <arg><option>-v | --verbose <replaceable></replaceable></option></arg>
      <arg><option>--mode=MODE <replaceable></replaceable></option></arg>
      <arg><option>-o FILE | --output-file=FILE <replaceable></replaceable></option></arg>
      <arg><option>-b FILE | --blobfile=FILE <replaceable></replaceable></option></arg>
      <arg><option>-p PREFIX | --blobprefix=PREFIX <replaceable></replaceable></option></arg>
      <arg><option>-n FILE | --primary-index-file=FILE <replaceable></replaceable></option></arg>
      <arg><option>-r ENCODING | --recode=ENCODING <replaceable></replaceable></option></arg>
      <arg><option>--separator=CHAR <replaceable></replaceable></option></arg>
      <arg><option>--enclosure=CHAR <replaceable></replaceable></option></arg>
      <arg><option>--include-blobs <replaceable></replaceable></option></arg>
      <arg><option>--fields=REGEX <replaceable></replaceable></option></arg>
      <arg><option>--tablename=NAME <replaceable></replaceable></option></arg>
      <arg><option>--delete-tablename <replaceable></replaceable></option></arg>
      <arg><option>--output-deleted <replaceable></replaceable></option></arg>
      <arg><option>--mark-deleted <replaceable></replaceable></option></arg>
      <arg>FILE </arg>
    </cmdsynopsis>
  </refsynopsisdiv>
  <refsect1>
    <title>DESCRIPTION</title>

    <para>This manual page documents the
      <command>&dhpackage;</command> command.</para>

    <para>&dhpackage; reads Paradox files and prints information about
		  the file or dumps the records to stdout or a file. &dhpackage; is mostly
			applied on Paradox .DB files but can also be used to show
			information about other Paradox files. It can also read associated
			blob files (.MB) and write each blob into a separate file.
      </para>
		<para>&dhpackage; can be used to convert Paradox databases into spreadsheet
		  readable CSV files (comma separated values) or SQL insert statements to
			import the records into a relational database. The sql output is optimized
			to be used with PostgreSQL.</para>
		<para>The programm currently supports only a subset of possible field
		  types.  These are strings, short and long integers, boolean, blobs
			and decimal numbers.</para>
  </refsect1>
  <refsect1>
    <title>OPTIONS</title>

    <para>The program follows the usual &gnu; command line syntax,
      with long options starting with two dashes (`-').  A summary of
      options is included below.</para>

    <variablelist>
      <varlistentry>
        <term><option>-h</option>
          <option>--help</option>
        </term>
        <listitem>
          <para>Show summary of options.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><option>-v</option>
          <option>--version</option>
        </term>
        <listitem>
          <para>Show version of program.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><option>-o</option>
          <option>--output-file</option>
        </term>
        <listitem>
          <para>All output except for usage information and error messages
					 will be written to the given file instead of stdout.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><option>-i</option>
          <option>--info</option>
        </term>
        <listitem>
          <para>Show information about Paradox file. If no other output format
					 is specified this will be the default.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><option>-t</option>
          <option>--schema</option>
        </term>
        <listitem>
          <para>Dump schema of database as it would be created by the official
					 Paradox software, when a database is exported in CSV format. This
					 option is the short form for --mode=schema.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><option>-v</option>
          <option>--verbose</option>
        </term>
        <listitem>
          <para>Output some more information from the header. This option is only
					 needed if you want see some internal information which are usually
					 not of any interessed.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><option>-c</option>
          <option>--csv</option>
        </term>
        <listitem>
          <para>Dump data records in CSV format. This
						option is the short form for --mode=csv.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><option>-s</option>
          <option>--sql</option>
        </term>
        <listitem>
          <para>Dump data records in SQL format. This
						option is the short form for --mode=sql.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><option>-x</option>
          <option>--html</option>
        </term>
        <listitem>
          <para>Dump data records in HTML table format. This
						option is the short form for --mode=html.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><option>--mode=MODE</option>
        </term>
        <listitem>
          <para>Sets the ouput mode. This options provides a different way
					 to set the output format. --mode=sql is equivalent to --sql,
					 --mode=csv to --csv, --mode=html to --html and --mode=schema
					 to --schema.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><option>-o FILE</option>
          <option>--output=FILE</option>
        </term>
        <listitem>
          <para>Dump records into given file instead of stdout.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><option>-b FILE</option>
          <option>--blobfile=FILE</option>
        </term>
        <listitem>
          <para>If the database files references blobs (binary large objects)
					 then read them from the
					 given file and write each blob into a single file. The filename will
					 be constructed from the blobprefix option, an underscore, the
					 internal number of the blob and the extension .blob.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><option>-p PREFIX</option>
          <option>--blobprefix=PREFIX</option>
        </term>
        <listitem>
          <para>Use this prefix for each filename of a blob. You can write
				   all blobs into a single directory by specifying a valid directory
					 path name. You will have to make sure the directory exists before
					 running &dhpackage;.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><option>-n FILE</option>
          <option>--primary-index-file=FILE</option>
        </term>
        <listitem>
          <para>Read the primary index from file. This option is only valid
					  it you are reading a database file.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><option>-r ENCODING</option>
          <option>--recode=ENCODING</option>
        </term>
        <listitem>
          <para>Recode all fields of type alpha to the given encoding. You will
					 have to specify the encoding similar to the
					 <application>recode</application> command, by passing only the part
					 on the right hand side of the `..' of what you usually pass to
					 recode.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><option>--separator=CHAR</option>
        </term>
        <listitem>
          <para>If the database is exported in csv format the given character
					 will be used to separate field values. Other output formats will not
					 be affected by this option.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><option>--enclosure=CHAR</option>
        </term>
        <listitem>
          <para>If the database is exported in csv format the given character
					 will be used to enclose field values if the field is of type char().
					 The enclosure will only take place if the delimiter between fields
					 is part of the field value.  Other output formats will not
					 be affected by this option.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><option>--include-blobs</option>
        </term>
        <listitem>
          <para>Includes blob fields in sql output. The field value itself
					 will be set to null. Currently only PostgreSQL syntax is
					 supported.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><option>--fields=REGEX</option>
        </term>
        <listitem>
          <para>This option allows to select certain fields by specifying
					 an extended regular expression. It will only effect the csv, html
					 and sql output. "field1|field23$" will select all fields whose name
					 contains "field1" or end in "field23". If this option is not used
					 als fields will be shown. The field name is case insensitive.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><option>--output-deleted</option>
        </term>
        <listitem>
          <para>Output even those records that has been deleted. Paradox
					  does not mark a record as deleted, but rather marks a complete
						data block (which usually contains several records) or sets
						its size to a lower value. If this option is active, then
						&dhpackage; will assume each data block is filled with its
						maximum number of records. This assumption may not always be true,
						especially for the last data block. Therefore you should handle
						the output with care.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><option>--mark-deleted</option>
        </term>
        <listitem>
          <para>Adds an additional column to the csv and html output which
					  indicates whether a record is deleted or actually available.
						This option is only available in csv and html mode and makes
						only sense if the option <option>--ouput-deleted</option> is
						passed as well. If you do not pass
						<option>--output-deleted</option> you will get
						an extra column with just zeros because none of the records is 
						deleted, otherwise it would not be shown.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><option>--delete-table</option>
        </term>
        <listitem>
          <para>Adds a sql command at the begining of the sql output to delete
					 an existing table before creating the new one. This option only
					 affects schema and sql output.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><option>--tablename=NAME</option>
        </term>
        <listitem>
          <para>Use given tablename instead of the one stored in the database
					 file. This option only affects schema and sql output.</para>
        </listitem>
      </varlistentry>
    </variablelist>

		<para>The none optional parameter FILE is the Paradox file which shall
		 be read.</para>
		<para>If you pass two or more options to set the output format then
		 each format
		 will be output one after the other starting with csv followed by
		 html and finally sql.</para>
		<para>The default field separator if exporting csv format is a tabulator.
		 Fields will be enclosed in " if required.</para>
  </refsect1>
	<refsect1>
	  <title>PRIMARY INDEX FILES</title>
		<para>&dhpackage; supports not just the reading and outputting of DB
		  files but also
		  of primary and secondary index files (PX, XGx, YGx files). This section
			will only focus on primary index files. Do not confuse this with the
			option <option>--primary-index-file</option> which is just for
			accelerated access on database records in a .DB file.</para>
		<para>An index file
			has the same basename as the database file. If it exists the database
			file will have the header field 'Num. of prim. Key fields' set to a
			value greater than 0. An index file is actually a regular database file
			with some extra columns and a slightly different header. There is no
			further reference between the database and index file beside the file
			name. You can always read a database without its primary index, but
			access will be slower.</para>
		<para>Each database file may have 1 or more primary key fields. The number
			is stored in the header of the database file.  Primary key fields
			must be in the first n columns of the database file. If for
			example the number of primary key fields is set to two, then the
			first two fields in the database file are primary keys.
			Consequently the .PX file will have these two fields as well. The
			values of the primay key fields in the index file are those of the
			first record in the referenced data block (see below).</para>
		<para>Each primary index file has beside the key fields three further
		  columns which point to data blocks in the database file. In order
			to understand these columns you need to know that database files are
			segmented into datablocks. The size of each data block can be calculated
			from the 'Max. Table size' value in the database file header. Datablocks
			are organized in a double linked list. Each
			data block is prefaced by a six bytes data block header which contains
			references to the previous and next data block in the list and the size
			of the block.</para>
		<para>The n+1 column (with n being the number of primary key fields) in the
		  primary index file contains the block number in the database file.
			The first block has number 1. The block number is
			used to locate the data block in the database file. It can be calculated
			by `(blocknumber - 1) * datablocksize + headersize'.
		  The n+2 column contains the number of records in the
		  referenced data block.</para>
		<para>Beside records whose block numbers point to blocks in the database
		  file, there are also so called index blocks. Its block numbers reffer
			other index blocks in the primary index itself. The reason for this is
			the tree structure of the index which is explained in the file
			/usr/share/doc/pxlib-doc/paradox4.txt. The number of records in this
			index blocks is the sum of all records referenzed by the records in
			the block this block references. If for example you have 100 records
			each pointing to a data block in the database with 5 records each,
			and those 100 records are store in a datablock number 1 in the index
			file, then the reference from an index record to this block number
			1 will have a record count 100*5. The index record itself will be part
			of an index block.</para>
		<para>The last column has some unknown meaning. It is often set to
		  zero.</para>
		<para>When you output the content of an primary index file you will
		  notice a forth extra column. This one is added by &dhpackage; itself.
			It is the block number the current record is stored in. It is very
			helpful when investigating the tree structure of the index file.
			Quite often one will find index blocks at the begining of an index
			file.</para>
	</refsect1>
  <refsect1>
    <title>SEE ALSO</title>

    <para>pxwrite(1), recode(1), iconv(1)</para>

  </refsect1>
  <refsect1>
    <title>AUTHOR</title>

    <para>This manual page was written by &dhusername; &lt;&dhemail;&gt;.
      Permission is
      granted to copy, distribute and/or modify this document under
      the terms of the &gnu; Free Documentation
      License, Version 1.1 or any later version published by the Free
      Software Foundation; with no Invariant Sections, no Front-Cover
      Texts and no Back-Cover Texts.</para>

  </refsect1>
</refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:2
sgml-indent-data:t
sgml-parent-document:nil
sgml-default-dtd-file:nil
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->


